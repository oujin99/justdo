package com.yujeans.justdo.user.repository;

import java.util.List;

import javax.persistence.EntityManager;

import org.springframework.stereotype.Repository;

import com.yujeans.justdo.dogether.AccountDogether;
import com.yujeans.justdo.user.Account;

import lombok.RequiredArgsConstructor;

@Repository
@RequiredArgsConstructor
public class AccountRepository {
	private final EntityManager em;


	
	/* 
	 *  id 통해 DB 내부의 name,e-mail,phone, img 조회 
	 */
	public List<Account> findProfileById(Long id) {
		String sql = "select a.NAME, a.EMAIL, a.PHONE, a.IMG from ACCOUNT a where a.id = :id";
		
		return em.createQuery(sql, Account.class)
				.setParameter("id", id)
				.getResultList();
		
	}
	
	/*
	 *  dogether 테이블의 img 값  = 썸네일 이미지 가져오기 
	 *  "|location.href='@{profile_addForm.html}'|"
	 *  
	 */
	public List<AccountDogether> findDogetherImg(Long id){
		String sql = "select ad.img from account_doghther ad where ad.id = :id ";
		return em.createQuery(sql, AccountDogether.class)
				.setParameter("id", id)
				.getResultList();
		
	}
}
