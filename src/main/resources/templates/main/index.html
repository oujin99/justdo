<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name='Title' content='저두'>
    <meta name='Subject' content='저두'>
    <meta name='Keywords' content='저두 레슨 취미 클래스 저스트두 이벤트'>
    <meta name='Author' content='minjeong'>
    <meta name='Publisher' content='minjeong'>
    <meta name='Description' content='저두 오신 것을 환영합니다.'>
    <meta name='Author-Date' content='20220323'>
    <meta name='Robots' content='index,follow'>
    <link rel="icon" type="images/png" href="/images/logo.png" />
    
    <link rel="manifest" href="../manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <title>저두: 저스트두 - 600만명이 선택한 생활서비스 멘토 매칭</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/swiper-bundle.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/category_modal.css">
    <link rel="stylesheet" href="../css/main-text.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="../js/script.js" defer></script>
    <!-- header, footer 공통 부분 -->
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
   	<!-- <script type="text/javascript">history.replaceState({}, null, location.pathname);</script> --> 
</head>



<body style="overflow: hidden">
    <ul id="skip">
        <li><a href="#header">헤더 바로가기</a></li>
        <li><a href="#nav">메뉴 바로가기</a></li>
        <li><a href="#footer">푸터 바로가기</a></li>
    </ul>

    <header>
    	<th:bloack th:replace="fragments/header.html :: header(${loginState}, ${nickname}, ${thumbnail_image}, ${profile_image})"></th:bloack>
    </header>
    <main>
    	<th:bloack th:replace="fragments/search.html :: search"></th:bloack>
        
        <div class="main_container">
           <div class="title-1">TALENT</div>
           <div class="title-2">&nbsp FOR &nbsp</div>
           <div class="title-3">SALE</div>
     	 </div>
        
        <section class="category_wrap">
            <h3 class="ir_so">카테고리</h3>
            <div class="container">
                <ul class="category_list">
                    <li><button id="btn1" value="운동" onclick="getCategory(this);"><img src="../img/health.png" alt="운동"><span class="first_category_name_span">운동</span></button></li>
                    <li><button id="btn2" value="음악" onclick="getCategory(this);"><img src="../img/music.png" alt="음악"><span class="first_category_name_span">음악</span></button></li>
                    <li><button id="btn3" value="요리" onclick="getCategory(this);"><img src="../img/cook.png" alt="요리"><span class="first_category_name_span">요리</span></button></li>
                    <li><button id="btn4" value="디자인" onclick="getCategory(this);"><img src="../img/art.png" alt="디자인/개발"><span class="first_category_name_span">디자인/개발</span></button></li>
                    <li><button id="btn5" value="뷰티" onclick="getCategory(this);"><img src="../img/beauty.png" alt="뷰티"><span class="first_category_name_span">뷰티</span></button></li>
                    <li><button id="btn6" value="오락" onclick="getCategory(this);"><img src="../img/game.png" alt="오락"><span class="first_category_name_span">오락</span></button></li>
                </ul>
            </div>
        </section>
       
        <!-- 모달창 -->
        <div class="modal-wrap" >
            <div class="modal-background"></div>
                <div class="modal-content">
                    <div class="modal-content-header"> 
                        <div class="title">
                            <img class="title-img" id="title_img" src="../img/lesson.svg" alt="음악">
                        </div>
                        <div class="title-font" id="first_category_title">음악</div>
                    </div>
                    <div class="toggles">
                        <button id="second_category_0" onclick="getThirdCategory(this)">악기</button>
                        <button id="second_category_1" onclick="getThirdCategory(this)">보컬</button>
                        <button id="second_category_2" onclick="getThirdCategory(this)">작곡/작사</button>
                        <button id="second_category_3" onclick="getThirdCategory(this)">프로그램</button>
                    </div>
                    <div class="modal-content-main">
                        <div class="categorys" id="third_category_container">
                        
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 모달창 종료 -->

    </main>


    <script src="../js/modal-category-2.js"></script>
    <script src="../js/modal-category.js"></script>
	
	<script src="/json/category.json" type="text/javascript"></script>
	
    <script th:inline="javascript">
		const category_json = JSON.parse(JSON.stringify(Category));
    	let firstCategory_init = null;
		
		function getCategory(firstCategory){
			$("#third_category_container").empty();
			firstCategory_init = firstCategory; 
			
			switch(firstCategory.value){
				case "운동" : $("#title_img").attr("src", "../img/health.png"); break;
				case "음악" : $("#title_img").attr("src", "../img/music.png"); break;
				case "요리" : $("#title_img").attr("src", "../img/cook.png"); break;
				case "디자인" : $("#title_img").attr("src", "../img/art.png"); break;
				case "뷰티" : $("#title_img").attr("src", "../img/beauty.png"); break;
				case "오락" : $("#title_img").attr("src", "../img/game.png"); break;
			}
			
			$("#first_category_title").html(firstCategory.value);
			//console.log(category_json);
			//console.log(firstCategory.value);
			//console.log(category_json.요리.조리);
			//console.log(Object.keys(category_json));
			
			// 해당 first category의 second category들 가져오기 
			//console.log(category_json[firstCategory.value]);
				
			let second_category_names = Object.keys(category_json[firstCategory.value]);
			
			for(let i=0; i<second_category_names.length; i++){
				//console.log(second_category_names[i]);
				$("#second_category_"+i).html(second_category_names[i]);
				$("#second_category_"+i).val(second_category_names[i]);
			}

		}
		
		function getThirdCategory(secondCategory){
			$("#third_category_container").empty();
			// console.log(secondCategory.id);
			// console.log(secondCategory.value);
			// console.log(firstCategory_init.value);
			
			// third category
			// console.log(category_json[firstCategory_init.value][secondCategory.value]);
			let third_category_names = category_json[firstCategory_init.value][secondCategory.value];
			
			for(let i=0; i<third_category_names.length; i++){
				
				//console.log(third_category_names[i]);
				
		    	$("#third_category_container").append($("<button class='"+secondCategory.id+" category' onclick='location.href=\"/dogether/listForm/"+third_category_names[i]+"\"'>"+third_category_names[i]+"</button>"));
		    	
			}
			
		}
    
    </script>
    
</body>

</html>